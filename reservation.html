   <!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Reservations</title>
</head>

   <!--- NAVBAR -->

<body class="reservation-page">
<nav class="navbar">
        <div class="navbar-container">
            <div class="navbar-brand">
                <a href="/index.html">
                    <img src="images/logo-transparent-png.png" alt="Steph VTC" class="logo" style="height:120px;width: 200px;">
                </a>
                </div>
            <ul class="navbar-menu">
                <li><a href="/index.html" class="navbar-link">Accueil</a></li>
                 <li><a href="/apropos.html" class="navbar-link">√Ä propos</a></li>
                <li><a href="/services.html" class="navbar-link">Nos services</a></li>
                 <li><a href="/reservation.html" class="navbar-link">R√©servations</a></li>
                <li><a href="/avis.html" class="navbar-link">Avis clients</a></li>
                <li><a href="/contact.html" class="navbar-link">Contact</a></li>
            </ul>
            <div class="navbar-spacer"></div>
            <button id="translationBtn" class="translation-btn" title="Translate to English">EN / FR</button>
        </div>
    </nav>
<section id="reservation" style="padding:50px 20px; text-align:center;">
  <h1 id="reservationTitle">R√©servation</h1>
>  <p id="reservationDescription" style="max-width:600px; margin:0 auto 30px; color:white; font-size:20px; text-shadow: 1px 1px 2px rgba(0,0,0,0.7);">
    Cliquez sur un jour disponible pour r√©server votre trajet via WhatsApp.
  </p>

  
  <!-- Calendrier styl√© -->
  <div class="calendar-container">
    <!-- S√©lecteur de mois/ann√©e -->
    <div class="calendar-header">
      <button onclick="changeMonth(-1)" class="calendar-nav-btn">‚óÄ</button>
      <h3 id="month-year" class="calendar-month-year"></h3>
      <button onclick="changeMonth(1)" class="calendar-nav-btn">‚ñ∂</button>
    </div>
    
    <!-- Jours de la semaine -->
    <div class="calendar-weekdays">
      <div class="weekday-0">Lu</div>
      <div class="weekday-1">Ma</div>
      <div class="weekday-2">Me</div>
      <div class="weekday-3">Je</div>
      <div class="weekday-4">Ve</div>
      <div class="weekday-5">Sa</div>
      <div class="weekday-6">Di</div>
    </div>

    <!-- Mini calendrier jours -->
    <div id="mini-calendar" class="calendar-days"></div>
  </div>
</section>

<script>
let currentLanguage = localStorage.getItem('language') || 'fr';
let translations = {};
let currentMonth = new Date().getMonth();
let currentYear = new Date().getFullYear();
let monthNames = ["Janvier","F√©vrier","Mars","Avril","Mai","Juin","Juillet","Ao√ªt","Septembre","Octobre","Novembre","D√©cembre"];
let availability = {}; 
const horaires = ['08:00','09:30','11:00','14:00','16:00','18:00'];

// Charger les fichiers JSON de traductions
async function loadTranslations() {
  try {
    const frResponse = await fetch('/translations/fr.json');
    const enResponse = await fetch('/translations/en.json');
    
    translations.fr = await frResponse.json();
    translations.en = await enResponse.json();
    
    // Initialiser avec la langue stock√©e
    translatePage(currentLanguage);
    fetchAvailability();
  } catch (error) {
    console.error('Erreur lors du chargement des traductions:', error);
    fetchAvailability();
  }
}

// Fonction pour traduire les √©l√©ments sp√©cifiques de la page reservation
function translatePage(language) {
  currentLanguage = language;
  localStorage.setItem('language', language);
  
  const lang = translations[language];
  if (!lang) return;

  // Navbar
  const navLinks = document.querySelectorAll('.navbar-link');
  const navKeys = ['home', 'about', 'services', 'bookings', 'reviews', 'contact'];
  navLinks.forEach((link, index) => {
    if (navKeys[index]) {
      link.textContent = lang.navbar[navKeys[index]];
    }
  });

  // Reservation page content
  const reservationTitle = document.getElementById('reservationTitle');
  if (reservationTitle) {
    reservationTitle.textContent = lang.reservationPage.title;
  }

  const reservationDesc = document.getElementById('reservationDescription');
  if (reservationDesc) {
    reservationDesc.textContent = lang.reservationPage.description;
  }

  // Update calendar with new month names
  monthNames = lang.reservationPage.monthNames;
  
  // Update weekday headers
  const weekdayElements = document.querySelectorAll('.calendar-weekdays > div');
  const weekdaysArray = lang.reservationPage.weekDaysShort;
  weekdayElements.forEach((el, index) => {
    if (weekdaysArray[index]) {
      el.textContent = weekdaysArray[index];
    }
  });
  
  updateCalendar();

  // Footer copyright
  const footerBottom = document.querySelector('.footer-bottom p');
  if (footerBottom) {
    footerBottom.textContent = lang.footer.copyright;
  }

  // Mettre √† jour l'attribut lang du document
  document.documentElement.lang = language;
  
  // Mettre √† jour le bouton de traduction
  const btn = document.getElementById('translationBtn');
  if (btn) {
    btn.title = language === 'fr' ? 'Translate to English' : 'Traduire en fran√ßais';
  }
}

async function fetchAvailability() {
  try {
    const API_URL = 'https://vtc-l3c5.onrender.com';
    const res = await fetch(`${API_URL}/availability`);
    availability = await res.json();
    updateCalendar();
  } catch(err) {
    console.error('Erreur r√©cup√©ration disponibilit√©s', err);
  }
}

function getActiveHoraires(year, month, day) {
  return (availability[year] && availability[year][month] && availability[year][month][day]) ? availability[year][month][day] : [];
}

function updateCalendar() {
  const calendar = document.getElementById('mini-calendar');
  const monthYearDisplay = document.getElementById('month-year');
  monthYearDisplay.textContent = `${monthNames[currentMonth]} ${currentYear}`;
  calendar.innerHTML = '';

  const firstDay = new Date(currentYear, currentMonth, 1).getDay();
  const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
  const startDay = firstDay === 0 ? 6 : firstDay - 1;

  for(let i=0;i<startDay;i++) calendar.appendChild(document.createElement('div'));

  for(let day=1;day<=daysInMonth;day++){
    const activeHoraires = getActiveHoraires(currentYear,currentMonth,day);
    const dayBox = document.createElement('div');
    dayBox.textContent = day;
    dayBox.style.padding = '15px 0';
    dayBox.style.borderRadius = '8px';
    dayBox.style.fontWeight = 'bold';
    dayBox.style.color = 'white';
    dayBox.style.userSelect = 'none';
    dayBox.style.fontSize = '16px';
    dayBox.style.minHeight = '40px';
    dayBox.style.display = 'flex';
    dayBox.style.alignItems = 'center';
    dayBox.style.justifyContent = 'center';

    if(activeHoraires.length){
      dayBox.style.backgroundColor = '#25D366';
      dayBox.style.cursor = 'pointer';
      dayBox.addEventListener('mouseenter',()=>dayBox.style.backgroundColor='#1ebe5d');
      dayBox.addEventListener('mouseleave',()=>dayBox.style.backgroundColor='#25D366');
      dayBox.addEventListener('click',()=>{
        const lang = translations[currentLanguage];
        let horaire = prompt(lang.reservationPage.availableHours + '\n' + activeHoraires.join(', '), activeHoraires[0]);
        if(horaire && activeHoraires.includes(horaire)){
          const selectedMonth = monthNames[currentMonth];
          const message = lang.reservationPage.bookingMessage
            .replace('{day}', day)
            .replace('{month}', selectedMonth)
            .replace('{year}', currentYear)
            .replace('{time}', horaire);
          window.open(`https://wa.me/33600000000?text=${encodeURIComponent(message)}`,'_blank');
        } else if(horaire){
          alert(lang.reservationPage.chooseSlot + ' ' + activeHoraires.join(', '));
        }
      });
    } else {
      dayBox.style.backgroundColor='#ccc';
    }
    calendar.appendChild(dayBox);
  }
}

function changeMonth(direction){
  currentMonth += direction;
  if(currentMonth>11){currentMonth=0;currentYear++;}
  else if(currentMonth<0){currentMonth=11;currentYear--;}
  updateCalendar();
}

// Initialiser au chargement de la page
window.addEventListener('DOMContentLoaded', function() {
  loadTranslations();
});

// Ajouter un √©v√©nement au bouton de traduction
document.addEventListener('DOMContentLoaded', function() {
  const btn = document.getElementById('translationBtn');
  if (btn) {
    btn.addEventListener('click', function() {
      const newLanguage = currentLanguage === 'fr' ? 'en' : 'fr';
      translatePage(newLanguage);
    });
  }
});

// JavaScript pour g√©rer l'effet de scroll de la navbar
window.addEventListener('scroll', function() {
  const navbar = document.querySelector('.navbar');
  if (window.scrollY > 50) {
    navbar.classList.add('scrolled');
  } else {
    navbar.classList.remove('scrolled');
  }
});
</script>

  <!-- Footer -->

    <footer class="footer">
        <div class="footer-container">
            <div class="footer-logo">
                <img src="/images/logo-transparent-png.png" alt="Steph VTC" style="height:120px; width: 200px;">
            </div>
            
            <div class="footer-contact">
                <div class="contact-info">
                    <span>üìû +351 963 215 368</span>
                    <span>‚úâÔ∏è Stephan.uberdriver@gmail.com</span>
                    <span>üìç Lisbonne, Portugal</span>
                </div>
            </div>
            
            <div class="footer-icons">
                <img src="/images/insta.png" alt="insta_icon">
                <img src="/images/FB.webp" alt="fb_icon">
                <img src="/images/icons8-linkedin-94.png" alt="lk_icon">
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>Copyright 2025 Nicolas VTC. Tous droits r√©serv√©s.</p>
        </div>
    </footer>
    
<!-- Menu Burger Script -->
<script src="burger-menu.js"></script>

</body>
</html>